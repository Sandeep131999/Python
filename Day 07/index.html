<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Hangman Game - PyScript</title>
  <link rel="stylesheet" href="https://pyscript.net/latest/pyscript.css" />
  <script defer src="https://pyscript.net/latest/pyscript.js"></script>
  <style>
    body { font-family: Arial, sans-serif; text-align: center; padding: 20px; background: #f0f4f8; }
    h1 { color: #3f51b5; }
    #output { white-space: pre-line; font-family: monospace; margin-top: 20px; }
    input { font-size: 1rem; padding: 5px; width: 40px; text-align: center; }
    button { font-size: 1rem; padding: 5px 15px; margin-left: 10px; cursor: pointer; }
  </style>
</head>
<body>

<h1>Hangman Game</h1>
<p>Guess the letters of the word!</p>

<input id="guess" type="text" maxlength="1" placeholder="a-z">
<button id="submit">Guess</button>

<pre id="output"></pre>

<py-script>
from js import document
import random

# Inline word list and ASCII stages
word_list = ["apple", "banana", "orange", "grape", "mango"]

stages = [
"""
  +---+
      |
      |
      |
     ===
""",
"""
  +---+
  O   |
      |
      |
     ===
""",
"""
  +---+
  O   |
  |   |
      |
     ===
""",
"""
  +---+
  O   |
 /|   |
      |
     ===
""",
"""
  +---+
  O   |
 /|\  |
      |
     ===
""",
"""
  +---+
  O   |
 /|\  |
 /    |
     ===
""",
"""
  +---+
  O   |
 /|\  |
 / \  |
     ===
"""
]

logo = """
 _
| |
| |__   __ _ _ __   __ _ _ __ ___   __ _ _ __
| '_ \\ / _` | '_ \\ / _` | '_ ` _ \\ / _` | '_ \\
| | | | (_| | | | | (_| | | | | | | (_| | | | |
|_| |_|\\__,_|_| |_|\\__, |_| |_| |_|\\__,_|_| |_|
                    __/ |
                   |___/    """

# Game variables
lives = 6
chosen_word = random.choice(word_list)
display = ["_"] * len(chosen_word)
correct_letters = []

output_area = document.getElementById("output")
output_area.innerText = logo + "\n\nWord to guess: " + " ".join(display) + f"\nLives: {lives}/6\n"

# Function to handle guesses
def submit_guess(event):
    global lives
    guess = document.getElementById("guess").value.lower()
    if not guess.isalpha() or len(guess) != 1:
        output_area.innerText += "\nPlease enter a single letter!"
        return

    if guess in correct_letters:
        output_area.innerText += f"\nYou've already guessed '{guess}'."
    else:
        correct_letters.append(guess)
        if guess in chosen_word:
            for i, letter in enumerate(chosen_word):
                if letter == guess:
                    display[i] = letter
        else:
            lives -= 1
            output_area.innerText += f"\n'{guess}' is not in the word. You lose a life."

    # Update output
    output_area.innerText = logo + "\n\nWord to guess: " + " ".join(display) + f"\nLives: {lives}/6\n"
    output_area.innerText += stages[6 - lives]

    # Check win/lose
    if "_" not in display:
        output_area.innerText += "\n\nðŸŽ‰ Congratulations! You won!"
        document.getElementById("submit").disabled = True
    elif lives == 0:
        output_area.innerText += f"\n\nðŸ’€ You lost! The word was '{chosen_word}'."
        document.getElementById("submit").disabled = True

# Attach button event
document.getElementById("submit").addEventListener("click", submit_guess)
</py-script>

</body>
</html>
